{"version":3,"file":"router.e74094cc.js","sources":["../packages/cli/src/lib/router.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\ndocument.addEventListener('click', function(e) {\n  const href = (e.path && e.path[0]\n    ? e.path[0].href // chrome + edge\n    : e.originalTarget && e.originalTarget.href\n      ? e.originalTarget.href // firefox\n      : '') || '';\n  // best case \"guess\" is that if the link originates on the current site when resolved by the browser\n  // treat it as a client side route, ex:  /about/, /docs/ and trigger the client side router\n  // https://github.com/ProjectEvergreen/greenwood/issues/562\n  const isOnCurrentDomain = href.indexOf(window.location.hostname) >= 0 || href.indexOf('localhost') >= 0;\n  const canClientSideRoute = href !== '' && isOnCurrentDomain;\n\n  if (canClientSideRoute) {\n    e.preventDefault();\n    \n    const route = href.replace(window.location.origin, '');\n    const routerOutlet = Array.from(document.getElementsByTagName('greenwood-route')).filter(outlet => {\n      return outlet.getAttribute('data-route') === route;\n    })[0];\n\n    if (routerOutlet.getAttribute('data-template') === window.__greenwood.currentTemplate) {\n      window.__greenwood.currentTemplate = routerOutlet.getAttribute('data-template');\n      routerOutlet.loadRoute();\n    } else {\n      window.location.href = href;\n    }\n  }\n});\n\nclass RouteComponent extends HTMLElement {\n  loadRoute() {\n    const route = this.getAttribute('data-route');\n    const key = this.getAttribute('data-key');\n    \n    fetch(key)\n      .then(res => res.text())\n      .then((response) => {\n        history.pushState(response, route, route);\n        document.getElementsByTagName('router-outlet')[0].innerHTML = response;\n      });\n  }\n}\n\nclass RouterOutletComponent extends HTMLElement { }\n\ncustomElements.define('greenwood-route', RouteComponent);\ncustomElements.define('router-outlet', RouterOutletComponent); "],"names":["document","addEventListener","e","href","path","originalTarget","isOnCurrentDomain","indexOf","window","location","hostname","preventDefault","route","replace","origin","routerOutlet","Array","from","getElementsByTagName","filter","outlet","getAttribute","__greenwood","currentTemplate","loadRoute","RouteComponent","HTMLElement","[object Object]","this","key","fetch","then","res","text","response","history","pushState","innerHTML","RouterOutletComponent","customElements","define"],"mappings":"AACAA,SAASC,iBAAiB,SAAS,SAASC,GAC1C,MAAMC,GAAQD,EAAEE,MAAQF,EAAEE,KAAK,GAC3BF,EAAEE,KAAK,GAAGD,KACVD,EAAEG,gBAAkBH,EAAEG,eAAeF,KACnCD,EAAEG,eAAeF,KACjB,KAAO,GAIPG,EAAoBH,EAAKI,QAAQC,OAAOC,SAASC,WAAa,GAAKP,EAAKI,QAAQ,cAAgB,EAGtG,GAFoC,KAATJ,GAAeG,EAElB,CACtBJ,EAAES,iBAEF,MAAMC,EAAQT,EAAKU,QAAQL,OAAOC,SAASK,OAAQ,IAC7CC,EAAeC,MAAMC,KAAKjB,SAASkB,qBAAqB,oBAAoBC,OAAOC,GAChFA,EAAOC,aAAa,gBAAkBT,GAC5C,GAECG,EAAaM,aAAa,mBAAqBb,OAAOc,YAAYC,iBACpEf,OAAOc,YAAYC,gBAAkBR,EAAaM,aAAa,iBAC/DN,EAAaS,aAEbhB,OAAOC,SAASN,KAAOA,MAK7B,MAAMsB,UAAuBC,YAC3BC,YACE,MAAMf,EAAQgB,KAAKP,aAAa,cAC1BQ,EAAMD,KAAKP,aAAa,YAE9BS,MAAMD,GACHE,KAAKC,GAAOA,EAAIC,QAChBF,KAAMG,IACLC,QAAQC,UAAUF,EAAUtB,EAAOA,GACnCZ,SAASkB,qBAAqB,iBAAiB,GAAGmB,UAAYH,KAKtE,MAAMI,UAA8BZ,aAEpCa,eAAeC,OAAO,kBAAmBf,GACzCc,eAAeC,OAAO,gBAAiBF"}